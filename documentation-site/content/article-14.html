<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

    <title>Annotating Video - Eagle Eye Networks API</title>
    <style>
        
        .preview_img {
            width: 320px;
            height: 180px;
        }

        img {
            width: 100%;
            border: grey solid thin;
        }

        body {
          padding-top: 5rem;
        }

        .starter-template {
          padding: 3rem 1.5rem;
          text-align: center;
        }

        .row {
            padding-top: 10px;
            padding-bottom: 20px;
        }

        h2 {
            border-bottom: thick linen solid;
        }


    </style>
</head>
<body>
    <main role="main" class="container-fluid">
        <div class="container-fluid">
            <div class="row" id="camera_holder"></div>

            <div class="row">
                <div class="col-9 offset-1">
                    <h1>Annotating Video</h1>
                </div>
            </div>


            <div class="row">
                <div class="col-9 offset-1"> 
                    <p>
                        It is often helpful to annotate a video with additional data.  It could be the license plate of a vehicle that drove by, the employee ID of the badge used to open a door, or the order information at a sales terminal.  The <a href="https://apidocs.eagleeyenetworks.com/apidocs/">Eagle Eye Networks Video API</a> makes it easy to attach your data to a video stream.
                    </p>
                    <p>
                       Before starting with this <a href="https://apidocs.eagleeyenetworks.com/apidocs/#annotation"> API endpoint</a> please reach out to <a href="mailto:api_support@een.com">api_support@een.com</a> to be assigned a namespace.  This helps prevents collisions with other applications.
                    </p>
                </div>
            </div>
            <div class="row">
                <div class="col-11 offset-1">
                    <h2>Understanding the JSON payload</h2>
                </div>
            </div>

            <div class="row">
                <div class="col-6 offset-1">       
                   <p>
                       To create an annotation we accept the payload as a JSON structure.  We will accept and store any valid JSON structure send to us.  We do not index the contents of the payload and will return it if requested.  Because we do not index the JSON data, you should store the UUID send back when an annotation is created.  Using the UUID will speed up retrieval.
                    </P>
                </div>
                <div class="col-5">
                    <img src="images/article-14-001.png">
                </div>
            </div>

            <div class="row">
                <div class="col-11 offset-1">
                    <h2>Understanding Bounding Boxes</h2>
                </div>
            </div>
            <div class="row">
                <div class="col-8 offset-1">
                    <p>
                        Although we do not require a specific schema for the JSON payload, we do reserve keys that start with the _ character for internal system functionality.  Please do not create your own variables starting with an underscore (_).
                    </p>
                    <p>
                        If you would like to display a bounding box over the preview images you can send it as shown in image on the left.  This will draw a bounding box with the top left corner at 53% from the left edge and 33% from the top.  The lower right corner of the box will be at 59% from the left edge and 44% from the top.
                    </p>
                    <p>
                        The actual bounding box coordinates are two nested arrays.  The first is the coordiantes of the top left corner and the second is the coordinates of the lower right corner.  Because a camera may display multiple streams in different aspect ratios, we use a ratio value instead of exact pixel values.  The width should be calculated as the pixel value divided by the total width of the image.  The height should be calculated as the pixel value divided by the total height of the image.
                    </p>
                    <p>
                        The bounding box is superimposed over the preview images and is not displayed when playing the video stream.  we do not modify the video and maintain it exactly as we received it from the camera.  If you would like to have the bounding box incorporated into the video you will need to modify the video and provide us the modified RTSP source.
                    </p>
                </div>
                <div class="col-3"></div>
            </div>


            <div class="row">
                <div class="col-11 offset-1">
                    <h2>Single Events vs Event Spans</h2>
                </div>
            </div>
            <div class="row">
                <div class="col-8 offset-1">
                    <p>
                        New annotations are created as unique events and will automatically close after 10 seconds.  The annootation can be updated with heartbeats to extend the length of the span but it will automatically close 10 seconds after the last hearbeat.  If you have an exact end time for an annotation you may <a href="https://apidocs.eagleeyenetworks.com/apidocs/#update-annotation">update the annotation</a> to with a 'type' parameter set to 'end'.
                    </p>
                    <p>
                        I will be going into this topic in more detail in a future blog post.
                    </p>
                </div>
                <div class="col-3">
                </div>
            </div>


            <div class="row">
                <div class="col-11 offset-1">
                    <h2>Retriving Annotations</h2>
                </div>
            </div>
            <div class="row">
                <div class="col-8 offset-1">
                    <p>
                        You can <a href="https://apidocs.eagleeyenetworks.com/apidocs/#get-annotation">get an annotation</a> by it's UUID or you can <a href="https://apidocs.eagleeyenetworks.com/apidocs/#get-list-of-annotations">get a list of annotations</a>.
                    </p>
                    <p>
                        You can use the UUID for the annotation that was returned when the annotation was created, or you can use the UUID returned for an entry when requesting a list of annotations.  It is also possible to request a list of annotations limited to a set of UUIDs by using the 'exclusive' parameter.
                    </p>
                    <p>
                        Annotations are kept for the retention period of a camera.  Because of this it is recommend that the data is also stored in another location if it is needed for longer than the retention periood of the caemra.
                    </p>
                    <p>
                        For retrieving an event span, the <a href="https://apidocs.eagleeyenetworks.com/apidocs/#get-list-of-events"> get list of events </a> API endpoint provides additional information.  It will provide all the updates and heartbeats for the event span.  We will be covering this in more detail in a future blog post.
                    </p>
                </div>
                <div class="col-3">
                </div>
            </div>

            <div class="row">
                <div class="col-11 offset-1">
                    <h2>What else can we do with this?</h2>
                </div>
            </div>
            <div class="row">
                <div class="col-9 offset-1">
                    <p>
                        Annotations are the first steps to pushing data into Eagle Eye Networks.  This API opens up new categories of integrations that can be done.  We already have select partners using this API and welcome the deeper integrations that it makes possible.
                    </p>
                    <<p>
                        I hope you found this helpful.  If you have any questions please feel free to reach out to us at api_support@een.com
                    </p>
                
                </div>

            </div>
            
        </div>

    </main>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

</body>
</html>
