<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

    <title>Bulk Change Camera Retention - Eagle Eye Networks API</title>
    <style>
        
        .preview_img {
            width: 320px;
            height: 180px;
        }

        img {
            width: 100%;
            border: grey solid thin;
        }

        body {
          padding-top: 5rem;
        }

        .starter-template {
          padding: 3rem 1.5rem;
          text-align: center;
        }

        .row {
            padding-top: 10px;
            padding-bottom: 20px;
        }

        h2 {
            border-bottom: thick linen solid;
        }


    </style>
</head>
<body>
    <main role="main" class="container-fluid">
        <div class="container-fluid">
            <div class="row" id="camera_holder"></div>

            <div class="row">
                <div class="col-9 offset-1">
                    <h1>Bulk Renaming Cameras</h1>
                </div>
            </div>


            <div class="row">
                <div class="col-9 offset-1"> 
                    <p>
                        I was asked to change the retention settings on several hundred cameras.  The end-customer had upgraded their internet connection and could now support uploaded video from 16 bridges and 800+ cameras.  These were across many sites and they gave me a specific list of bridges that could be upgraded.
                    </p>
                </div>
            </div>
            <div class="row">
                <div class="col-11 offset-1">
                    <h2>Step 1: Login to the Eagle Eye API</h2>
                </div>
            </div>

            <div class="row">
                <div class="col-8 offset-1">       
                   <p>
                       The first step in working with our API is to login with your username, password and API key.  All requests to our API should include the <a href="https://apidocs.eagleeyenetworks.com/apidocs/#get-an-api-key">API key that you created</a>.  After the <a href="https://apidocs.eagleeyenetworks.com/apidocs/#authentication">Authentication</a> step, you will get a token which you will then need to pass into the <a href="https://apidocs.eagleeyenetworks.com/apidocs/#3-authorize">Authorization</a> step.  We automatically return you the user information for the user who just logged-in.
                    </p>
                </div>
                <div class="col-3"></div>
            </div>

            <div class="row">
                <div class="col-11 offset-1">
                    <h2>Step 2: Get Available Devices</h2>
                </div>
            </div>
            <div class="row">
                <div class="col-8 offset-1">
                    <p>
                        The currently logged-in user is able to get information about what <a href="https://apidocs.eagleeyenetworks.com/apidocs/#get-list-of-cameras">devices they have been given access to</a>.  Once you had the cameras you can start the matching process.
                    </p>
                </div>
                <div class="col-3"></div>
            </div>


            <div class="row">
                <div class="col-11 offset-1">
                    <h2>Step 3: Iterate Through All The Cameras</h2>
                </div>
            </div>
            <div class="row">
                <div class="col-8 offset-1">
                    <p>
                        Camera settings can be confusing to work with.  The core idea is that there are default values and new settings are applied on top of these.  This allows the default values to change over time without losing items that have been explicitely set.
                    </p>
                    <p>
                        You can get all the details <a href="https://apidocs.eagleeyenetworks.com/apidocs/#update-camera">here</a>.
                    </p>
                    <p>
                        Changing the actual camera setting is just updating the values with a POST to `/g/device`.  We can build up the update object by creating a blank object named "camera_settings_add" and inside of the another object named "settings".  We want to change the "cloud_retention_days" so we will add that as a key and the value will be 60.
                    </p>
                    <p>
                        Describing code is sometimes confusing so it might be helpful to look at <a href="https://github.com/EENCloud/API-Documentation/tree/master/EE-bulk-settings/blob/master/change_cloud_retention.py">the code sample</a> for this blog post.
                    </p>
                </div>
                <div class="col-3">
                </div>
            </div>


            <div class="row">
                <div class="col-11 offset-1">
                    <h2>What else can we do with this?</h2>
                </div>
            </div>
            <div class="row">
                <div class="col-9 offset-1">
                    <p>
                        This pattern and function can be used to same hours of manually adjust camera settings.  It can also be used to audit a site and confirm that it complies with your video retention policy.
                    </p>
                    <p>
                        I hope you found this helpful.  If you have any questions please feel free to reach out to us at api_support@een.com
                    </p>
                </div>

            </div>
            
        </div>

    </main>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

</body>
</html>
